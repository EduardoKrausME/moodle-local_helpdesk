define(["jquery","core/modal_factory","local_kopere_dashboard/dataTables_init"],function($,ModalFactory,dataTables_init){return{init:function(){var chartUser=$("#chart-user-button-open");chartUser.show();chartUser.find(".badge").click(function(){chartUser.find(".badge").hide();$("[name=find_user]").val(0);console.log(chartUser.attr("data-defaultfullname"));chartUser.find(".select").html(chartUser.attr("data-defaultfullname"))});chartUser.find(".select").click(function(){if(window.data_user_block_select){if(window.data_user_block_select!="wait"){window.data_user_block_select.show()}}else{window.data_user_block_select="wait";ModalFactory.create({type:ModalFactory.types.DEFAULT,title:$("#chart-user-datatable-select").attr("title"),body:$("#chart-user-datatable-select").html()}).then(function(modal){if(!modal.root){modal.root=modal._root}window.data_user_block_select=modal;window.data_user_block_select.show();window.data_user_block_select.root.addClass("kopere-bi");window.data_user_block_select.root.find(".modal-dialog").addClass("modal-xl").addClass("kopere-dashboard-modal");var urlajax=$("#chart-user-datatable-select").attr("data-urlajax");$("#chart-user-datatable-select").remove();dataTables_init.init("datatable_user_select",{autoWidth:false,columns:[{data:"id"},{data:"fullname"},{data:"username"},{data:"email"}],columnDefs:[{render:"numberRenderer",targets:0}],export_title:false,order:[[1,"asc"]],processing:true,serverSide:true,ajax:{url:urlajax,type:"POST",dataType:"json"}});$("#datatable_user_select tbody").on("click","tr",function(){var data=window["datatable_user_select"].row(this).data();$("#chart-user-button-open .select").html(data.fullname);$("[name=find_user]").val(data.id);window.data_user_block_select.hide();chartUser.find(".badge").show()})})}})}}});